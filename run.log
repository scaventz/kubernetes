KUBE_ROOT: /home/xinw/repos/kubernetes
KUBE_ROOT_PLAY: /home/xinw/repos/kubernetes
+++ [1105 11:33:53] Verifying Prerequisites....
+++ [1105 11:33:53] require_docker: true
+++ [1105 11:33:54] Docker Version:
Client: Docker Engine - Community
Cloud integration: v1.0.35+desktop.5
Version:           24.0.7
API version:       1.43
Go version:        go1.20.10
Git commit:        afdd53b
Built:             Thu Oct 26 09:08:17 2023
OS/Arch:           linux/amd64
Context:           default

Server: Docker Desktop
Engine:
Version:          24.0.7
API version:      1.43 (minimum version 1.12)
Go version:       go1.20.10
Git commit:       311b9ff
Built:            Thu Oct 26 09:08:02 2023
OS/Arch:          linux/amd64
Experimental:     false
containerd:
Version:          1.6.25
GitCommit:        d8f198a4ed8892c764191ef7b3b06d8a2eeb5c7f
runc:
Version:          1.1.10
GitCommit:        v1.1.10-0-g18a0cb0
docker-init:
Version:          0.19.0
GitCommit:        de40ad0
+++ [1105 11:33:54] Verifying Prerequisites....succeed
+++ [1105 11:33:54] LOCAL_OUTPUT_BUILD_CONTEXT: /home/xinw/repos/kubernetes/_output/images/kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:54] arg paass to docker_build: 
    kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    /home/xinw/repos/kubernetes/_output/images/kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    false
    --build-arg=KUBE_CROSS_IMAGE=registry.k8s.io/build-image/kube-cross --build-arg=KUBE_CROSS_VERSION=v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:54] Building Docker image kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:54] build_cmd: docker
+++ [1105 11:33:54] build_cmd: docker
    buildx
    build
    --load
    -t
    kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    --pull=false
    --build-arg=KUBE_CROSS_IMAGE=registry.k8s.io/build-image/kube-cross
    --build-arg=KUBE_CROSS_VERSION=v1.31.0-go1.22.4-bullseye.0
    /home/xinw/repos/kubernetes/_output/images/kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
DOCKER[@] in docker_delete_old_containers: docker
arg1: kube-build-cf9ce3eca7
arg2: kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container ddd
+++ [1105 11:33:57] Keeping container kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
DOCKER[@] in docker_delete_old_containers: docker
arg1: kube-rsync-cf9ce3eca7
arg2: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container ddd
+++ [1105 11:33:57] Keeping container kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
DOCKER[@] in docker_delete_old_containers: docker
arg1: kube-build-data-cf9ce3eca7
arg2: kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping container ddd
+++ [1105 11:33:57] Keeping container kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping image kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping image kube-build:build-9bcdcf4a5b-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Keeping image kube-build:build-3c6a80b8f1-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] first line of kube::build::ensure_data_container()
+++ [1105 11:33:57] kube::build::ensure_data_container() === 1
+++ [1105 11:33:57] last line of kube::build::ensure_data_container()
+++ [1105 11:33:57] Syncing sources to container
+++ [1105 11:33:57] start_rsyncd_container() first line
+++ [1105 11:33:57] bofore kube::build::stop_rsyncd_container
+++ [1105 11:33:57] [start] kube::build::stop_rsyncd_container
+++ [1105 11:33:57] Stopping any currently running rsyncd container
+++ [1105 11:33:57] [mid] kube::build::stop_rsyncd_container: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] [kube::build::destroy_container] 1
+++ [1105 11:33:57] $\{DOCKER[@]\} is: docker
+++ [1105 11:33:57] [kube::build::destroy_container] 2
+++ [1105 11:33:57] [end] kube::build::stop_rsyncd_container: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:57] Starting rsyncd container
+++ [1105 11:33:57] kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0 -p 127.0.0.1::8730 -d     -e ALLOW_HOST=172.31.143.47
         -- /rsyncd.sh >/dev/null
+++ [1105 11:33:57] going to execute kube::build::run_build_command_ex
hello world
wow
+++ [1105 11:33:57] entering method kube::build::run_build_command_ex
+++ [1105 11:33:57] executing docker_cmd at line 597: 
+++ [1105 11:33:57] [kube::build::destroy_container] 1
+++ [1105 11:33:57] $\{DOCKER[@]\} is: docker
+++ [1105 11:33:58] [kube::build::destroy_container] 2
+++ [1105 11:33:58] destry container: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:58] exec: docker
    run
    --name=kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    --user=1003:1003
    --hostname=msi
    -e=GOPROXY=
    --volumes-from
    kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    -p
    127.0.0.1::8730
    -d
    -e
    ALLOW_HOST=172.31.143.47 
    --env
    KUBE_FASTBUILD=false
    --env
    KUBE_BUILDER_OS=linux-gnu
    --env
    KUBE_VERBOSE=10
    --env
    KUBE_BUILD_WITH_COVERAGE=
    --env
    KUBE_BUILD_PLATFORMS=
    --env
    KUBE_CGO_OVERRIDES='  '
    --env
    KUBE_STATIC_OVERRIDES='  '
    --env
    FORCE_HOST_GO=
    --env
    GO_VERSION=
    --env
    GOTOOLCHAIN=
    --env
    GOFLAGS=
    --env
    GOGCFLAGS=
    --env
    SOURCE_DATE_EPOCH=
    --interactive
    --tty
    kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    /rsyncd.sh
627a6cfeb4ab7069ed91aa74977c7a35236e804abe8be9f5a16001e85fad9be6
+++ [1105 11:33:58] just excuted kube::build::run_build_command_ex
627a6cfeb4ab   kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0   "/rsyncd.sh"             Less than a second ago   Up Less than a second           127.0.0.1:65081->8730/tcp   kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:58] docker
    port
    kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    8730
    2> /dev/null | cut -d: -f 2
+++ [1105 11:33:58] mapped_port
    65081
container_ip: 172.17.0.2
+++ [1105 11:33:58] going to execute probe
+++ [1105 11:33:58] mapped_port: 65081
rsync rsync://k8s@127.0.0.1:65081/          --password-file=/home/xinw/repos/kubernetes/_output/images/kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0/rsyncd.password          &> /dev/null
k8s            	
rsync succeed
KUBE_RSYNC_ADDR= 127.0.0.1:65081
+++ [1105 11:33:58] execute rsync
+++ [1105 11:33:58] Running rsync
+++ [1105 11:33:58] rsync command: --archive
    --password-file=/home/xinw/repos/kubernetes/_output/images/kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0/rsyncd.password
    -iv --delete
    --filter=- /_tmp/
    --filter=- /_output/
    --filter=- /
    /home/xinw/repos/kubernetes/
    rsync://k8s@127.0.0.1:65081/k8s/
sending incremental file list
<f..t...... .dockerized-kube-version-defs
<f.st...... run.log
.d..t...... .git/
<f..t...... .git/index
<f.st...... hack/make-rules/test-cmd.sh

sent 4,022,808 bytes  received 16,722 bytes  2,693,020.00 bytes/sec
total size is 3,390,506,725  speedup is 839.33
+++ [1105 11:33:59] execute rsync succed
+++ [1105 11:33:59] [start] kube::build::stop_rsyncd_container
+++ [1105 11:33:59] Stopping any currently running rsyncd container
+++ [1105 11:33:59] [mid] kube::build::stop_rsyncd_container: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:33:59] [kube::build::destroy_container] 1
+++ [1105 11:33:59] $\{DOCKER[@]\} is: docker
+++ [1105 11:34:00] [kube::build::destroy_container] 2
+++ [1105 11:34:00] [end] kube::build::stop_rsyncd_container: kube-rsync-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:34:00] stop_rsyncd_container succed
+++ [1105 11:34:00] Output from this container will be rsynced out upon completion. Set KUBE_RUN_COPY_OUTPUT=n to disable.
+++ [1105 11:34:00] Running build command...
+++ [1105 11:34:00] KUBE_BUILD_CONTAINER_NAME: kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
wow
+++ [1105 11:34:00] entering method kube::build::run_build_command_ex
+++ [1105 11:34:00] executing docker_cmd at line 597: 
+++ [1105 11:34:00] [kube::build::destroy_container] 1
+++ [1105 11:34:00] $\{DOCKER[@]\} is: docker
+++ [1105 11:34:00] [kube::build::destroy_container] 2
+++ [1105 11:34:00] destry container: kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
+++ [1105 11:34:00] exec: docker
    run
    --name=kube-build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    --user=1003:1003
    --hostname=msi
    -e=GOPROXY=
    --volumes-from
    kube-build-data-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    --env
    KUBE_FASTBUILD=false
    --env
    KUBE_BUILDER_OS=linux-gnu
    --env
    KUBE_VERBOSE=10
    --env
    KUBE_BUILD_WITH_COVERAGE=
    --env
    KUBE_BUILD_PLATFORMS=
    --env
    KUBE_CGO_OVERRIDES='  '
    --env
    KUBE_STATIC_OVERRIDES='  '
    --env
    FORCE_HOST_GO=
    --env
    GO_VERSION=
    --env
    GOTOOLCHAIN=
    --env
    GOFLAGS=
    --env
    GOGCFLAGS=
    --env
    SOURCE_DATE_EPOCH=
    --interactive
    --tty
    kube-build:build-cf9ce3eca7-5-v1.31.0-go1.22.4-bullseye.0
    make
    test-cmd
prepare to run hack/make-rules/test-cmd.sh
+++ [1105 11:34:01] going to run legacy-script.sh
+++ [1105 11:34:01] source done at line 64
+++ [1105 11:34:01] at line 128
+++ [1105 11:34:01] at line 173
Recording: record_command_canary
Running command: record_command_canary

+++ Running case: test-cmd.record_command_canary 
+++ working dir: /go/src/k8s.io/kubernetes
+++ command: record_command_canary
/go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh: line 169: bogus-expected-to-fail: command not found
sh2ju.sh line 51, $1 is: record_command_canary
!!! [1105 11:34:01] Call tree:
!!! [1105 11:34:01]  1: /go/src/k8s.io/kubernetes/test/cmd/../../third_party/forked/shell2junit/sh2ju.sh:52 record_command_canary(...)
!!! [1105 11:34:01]  2: /go/src/k8s.io/kubernetes/test/cmd/../../third_party/forked/shell2junit/sh2ju.sh:119 eVal(...)
!!! [1105 11:34:01]  3: /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:144 juLog(...)
!!! [1105 11:34:01]  4: /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:174 record_command(...)
!!! [1105 11:34:01]  5: hack/make-rules/test-cmd.sh:36 source(...)
!!! Error in /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:169
  Error in /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:169. 'bogus-expected-to-fail' exited with status 127
Call stack:
  1: /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:169 record_command_canary(...)
  2: /go/src/k8s.io/kubernetes/test/cmd/../../third_party/forked/shell2junit/sh2ju.sh:52 eVal(...)
  3: /go/src/k8s.io/kubernetes/test/cmd/../../third_party/forked/shell2junit/sh2ju.sh:119 juLog(...)
  4: /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:144 record_command(...)
  5: /go/src/k8s.io/kubernetes/test/cmd/legacy-script.sh:174 source(...)
  6: hack/make-rules/test-cmd.sh:36 main(...)
Exiting with status 1
+++ exit code: 1
+++ error: 1
exitCode is: 1
${foundError}: 
+++ [1105 11:34:01] legacy-script.sh executed
+++ [1105 11:34:01] Running kubeadm tests
pwd is
/go/src/k8s.io/kubernetes
KUBE_ROOT:  /go/src/k8s.io/kubernetes/test/cmd/../..
before setup_env
KUBE_ROOT: /go/src/k8s.io/kubernetes
KUBE_VERBOSE: 10
Go version: go version go1.22.4 linux/amd64
+++ [1105 11:34:07] Building go targets for linux/amd64
kube::golang::build_binaries_for_platform entrypoint
794 binary:  k8s.io/kubernetes/cmd/kubeadm
    k8s.io/kubernetes/cmd/kubeadm (static)
Env for linux/amd64: GOPATH=/go/src/k8s.io/kubernetes/_output/dockerized/go GOOS=linux GOARCH=amd64 GOROOT= CGO_ENABLED= CC=
Building binaries with GCFLAGS= LDFLAGS=all=-X 'k8s.io/client-go/pkg/version.buildDate=2024-11-05T03:34:01Z' -X 'k8s.io/component-base/version.buildDate=2024-11-05T03:34:01Z' -X 'k8s.io/client-go/pkg/version.gitCommit=60e174f434ed4d1983912c73c8b944fa796a5505' -X 'k8s.io/component-base/version.gitCommit=60e174f434ed4d1983912c73c8b944fa796a5505' -X 'k8s.io/client-go/pkg/version.gitTreeState=dirty' -X 'k8s.io/component-base/version.gitTreeState=dirty' -X 'k8s.io/client-go/pkg/version.gitVersion=v1.31.0-alpha.2.267+60e174f434ed4d-dirty' -X 'k8s.io/component-base/version.gitVersion=v1.31.0-alpha.2.267+60e174f434ed4d-dirty' -X 'k8s.io/client-go/pkg/version.gitMajor=1' -X 'k8s.io/component-base/version.gitMajor=1' -X 'k8s.io/client-go/pkg/version.gitMinor=31+' -X 'k8s.io/component-base/version.gitMinor=31+'  -s -w
line 819
${statics[@]} k8s.io/kubernetes/cmd/kubeadm
line 744
Coverage is disabled.
pwd: 
/go/src/k8s.io/kubernetes
going to execute:  go install -installsuffix=static -trimpath -gcflags= -ldflags=all=-X 'k8s.io/client-go/pkg/version.buildDate=2024-11-05T03:34:01Z' -X 'k8s.io/component-base/version.buildDate=2024-11-05T03:34:01Z' -X 'k8s.io/client-go/pkg/version.gitCommit=60e174f434ed4d1983912c73c8b944fa796a5505' -X 'k8s.io/component-base/version.gitCommit=60e174f434ed4d1983912c73c8b944fa796a5505' -X 'k8s.io/client-go/pkg/version.gitTreeState=dirty' -X 'k8s.io/component-base/version.gitTreeState=dirty' -X 'k8s.io/client-go/pkg/version.gitVersion=v1.31.0-alpha.2.267+60e174f434ed4d-dirty' -X 'k8s.io/component-base/version.gitVersion=v1.31.0-alpha.2.267+60e174f434ed4d-dirty' -X 'k8s.io/client-go/pkg/version.gitMajor=1' -X 'k8s.io/component-base/version.gitMajor=1' -X 'k8s.io/client-go/pkg/version.gitMinor=31+' -X 'k8s.io/component-base/version.gitMinor=31+'  -s -w -tags=selinux,notest, k8s.io/kubernetes/cmd/kubeadm
install succeeded?
echo gopath: /go/src/k8s.io/kubernetes/_output/dockerized/go
ls $GOPATH/bin
total 58516
-rwxr-xr-x 1 1003 1003 57852056 Nov  5 11:34 kubeadm
-rwxr-xr-x 1 1003 1003  2063064 Nov  2 10:07 ncpu
line 827
line 860
+++ [1105 11:34:11] linux/amd64: build finished###
+++ [1105 11:34:11] Placing binaries
rm -f /go/src/k8s.io/kubernetes/_output/bin
mkdir -p /go/src/k8s.io/kubernetes/_output
ln -s  /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/amd64 /go/src/k8s.io/kubernetes/_output/bin
+++ [1105 11:34:11] Placing binaries for linux/amd64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/amd64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin
${KUBE_OUTPUT_BIN}/${platform}: /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/amd64
goingto execute: 
find /go/src/k8s.io/kubernetes/_output/dockerized/go/bin -maxdepth 1 -type f -exec rsync -pc {} /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/amd64
rsync is done, now files in destination is:
total 58516
-rwxr-xr-x 1 1003 1003 57852056 Nov  5 11:34 kubeadm
-rwxr-xr-x 1 1003 1003  2063064 Nov  2 11:00 ncpu
+++ [1105 11:34:11] Placing binaries for linux/386 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/386
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/linux_386
+++ [1105 11:34:11] Placing binaries for linux/arm in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/arm
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/linux_arm
+++ [1105 11:34:11] Placing binaries for linux/arm64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/arm64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/linux_arm64
+++ [1105 11:34:11] Placing binaries for linux/s390x in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/s390x
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/linux_s390x
+++ [1105 11:34:11] Placing binaries for linux/ppc64le in /go/src/k8s.io/kubernetes/_output/dockerized/bin/linux/ppc64le
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/linux_ppc64le
+++ [1105 11:34:11] Placing binaries for darwin/amd64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/darwin/amd64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/darwin_amd64
+++ [1105 11:34:11] Placing binaries for darwin/arm64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/darwin/arm64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/darwin_arm64
+++ [1105 11:34:11] Placing binaries for windows/amd64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/windows/amd64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/windows_amd64
+++ [1105 11:34:11] Placing binaries for windows/386 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/windows/386
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/windows_386
+++ [1105 11:34:11] Placing binaries for windows/arm64 in /go/src/k8s.io/kubernetes/_output/dockerized/bin/windows/arm64
full_binpath_src is: /go/src/k8s.io/kubernetes/_output/dockerized/go/bin/windows_arm64
hack/make-rules/test-cmd.sh: line 176: KUBEADM_PATH: unbound variable
make: *** [Makefile:311: test-cmd] Error 1
!!! [1105 11:34:12] Call tree:
!!! [1105 11:34:12]  1: build/../build/common.sh:515 kube::build::run_build_command_ex(...)
!!! [1105 11:34:12]  2: build/run.sh:41 kube::build::run_build_command(...)
!!! Error in build/../build/common.sh:608
  Error in build/../build/common.sh:608. '"${docker_cmd[@]}" "${cmd[@]}"' exited with status 2
Call stack:
  1: build/../build/common.sh:608 kube::build::run_build_command_ex(...)
  2: build/../build/common.sh:515 kube::build::run_build_command(...)
  3: build/run.sh:41 main(...)
Exiting with status 1
